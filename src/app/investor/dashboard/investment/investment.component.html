<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true"> <!-- Accordion-->
  <div class="panel panel-info">
    <div class="panel-heading" role="tab" id="headingOne">
     <div class="row">
        <div class="col-sm-8 col-md-8">
           <h4 class="panel-title">
           <a role="button" data-toggle="collapse" data-parent="#accordion" (click)="toggleCollapse()"  aria-expanded="true" aria-controls="collapseOne">
             {{investment.totalAmount | currency:'USD':true:'.2' }}
             <span class="sw-box-text">- {{investment.creditCompanyAddress}}
             </span>
           </a>
           </h4>
        </div>
        <div class="col-sm-4 col-md-4">
           <p class="sw-box-text sw-collapse-icons">Assets: {{investment.assets.length}} | <i aria-hidden="true"></i> {{investment.grossReturn | percent}}</p>
        </div>
     </div>
    </div>

    <div id="collapseOne" class="panel-collapse collapse" [ngClass]="{'in': collapsed}"  role="tabpanel" aria-labelledby="headingOne">
      <div class="panel-body">
        <div class="col-sm-4 col-md-4">
            <a href="credit-company-profile.html"><p class="sw-box-text sw-blue1">{{investment.companyName}}</p></a>
            <p class="sw-box-text">Contract term: {{investment.paybackMonths}} months</p>
            <p class="sw-box-text">Originally invested: {{investment.investedAt | date: 'yyyy-MM-dd'}}</p>
            <p class="sw-box-text">Bought in: {{investment.boughtAt | date: 'yyyy-MM-dd'}}</p><hr>

        </div>
        <div class="col-sm-4 col-md-4">
            <p class="sw-box-text" *ngIf="investment.type == 'Bought'">Investment: {{(investment.assets[0].boughtValue || investment.totalAmount) | currency:'USD':true:'.2' }}</p>
            <p class="sw-box-text" *ngIf="investment.type == 'Investments'">Investment: {{investment.totalAmount | currency:'USD':true:'.2' }}</p>
            <p class="sw-box-text">Gross return: {{calculateReturnAmount() | currency:'USD':true:'.2' }}</p>
            <p class="sw-box-text">Return date: <span class="sw-blue1">{{calculatePaybackDate() | date: 'yyyy-MM-dd'}}</span></p>
            <!-- <p class="sw-box-text">Performance: <span class="sw-high">High / No Delay</span></p> -->
            <!-- <p><i class="fa fa-star sw-star-full" aria-hidden="true"></i> <i class="fa fa-star sw-star-full" aria-hidden="true"></i> <i class="fa fa-star sw-star-full" aria-hidden="true"></i> <i class="fa fa-star sw-star-full" aria-hidden="true"></i> <i class="fa fa-star sw-star-full" aria-hidden="true"></i></p> -->
        </div>
        <!-- <div class="col-sm-4 col-md-4"> -->
            <!-- <p class="sw-box-text sw-chart-installs">Installments payed</p> -->
            <!-- <div class="sw-progress-circle p50"> -->
            <!-- Start Circular chart-->
              <!-- <span>3/6</span> -->
              <!-- <div class="sw-left-half-clipper"> -->
                 <!-- <div class="sw-first50-bar"></div> -->
                 <!-- <div class="sw-value-bar"></div> -->
             <!-- </div> -->
            <!-- </div>  -->
            <!-- End Circular chart-->
        <!-- </div> -->
        <div class="col-sm-4 col-md-4">
            <p class="sw-box-text sw-chart-roi">Gross return rate</p>
            <div class="sw-progress-circle p{{investment.grossReturn*100}}"> <!-- Start Circular chart-->
              <span>{{investment.grossReturn | percent}}</span>
              <div class="sw-left-half-clipper">
                 <div class="sw-first50-bar"></div>
                 <div class="sw-value-bar"></div>
             </div>
            </div> <!-- End Circular chart-->
        </div>

        <hr>

        <div class="col-sm-12 col-md-12 table-responsive">
          <table class="table table-hover">
            <tr class="active">
              <th>Asset</th>
              <th>Original value</th>
              <th>Status</th>
              <th>Contract</th>
              <th>Cancel</th>
              <th>Sell</th>
            </tr>
            <tr *ngFor="let asset of investment.assets, let i = index">
              <td>{{i + 1}}</td>
              <td>{{asset.value | currency:'USD':true:'.2'}}</td>
              <td>{{statusToString(asset.status)}}</td>
              <td><span *ngIf="!asset.contractAddress">-</span><a *ngIf="asset.contractAddress" (click)="exploreContract(asset.contractAddress)">Explore</a></td>
              <td>
                <button class="btn sw-accept-decline sw-btn-danger" *ngIf="(asset.status == PENDING_OWNER_AGREEMENT && asset.investor == walletAddress)" (click)="cancelInvestment(asset)">
                  <i class="fa fa-times" aria-hidden="true"></i>
                </button>
                <button class="btn sw-accept-decline sw-btn-danger" *ngIf="(asset.status == FOR_SALE && asset.investor == walletAddress)" (click)="cancelSellOrder(asset)">
                  <i class="fa fa-times" aria-hidden="true"></i>
                </button>
                <button class="btn sw-accept-decline sw-btn-danger" *ngIf="(asset.status == PENDING_INVESTOR_AGREEMENT && asset.investor != walletAddress)" (click)="cancelSale(asset)">
                  <i class="fa fa-times" aria-hidden="true"></i>
                </button>
                <button class="btn sw-accept-decline sw-btn-danger" *ngIf="(asset.status == PENDING_INVESTOR_AGREEMENT && asset.investor == walletAddress)" (click)="refuseSale(asset)">
                  <i class="fa fa-times" aria-hidden="true"></i>
                </button>
              </td>
              <td>
                <button class="btn sw-accept-decline sw-btn-ghost1" *ngIf="asset.status == INVESTED && asset.investor == walletAddress" (click)="sellAsset(asset)">
                  <i class="fa fa-check" aria-hidden="true"></i>
                </button>
                <button class="btn sw-accept-decline sw-btn-ghost1" *ngIf="asset.status == PENDING_INVESTOR_AGREEMENT && asset.investor == walletAddress" (click)="acceptSale(asset)">
                  <i class="fa fa-check" aria-hidden="true"></i>
                </button>
              </td>
            </tr>

          </table>

        </div>

      </div>
    </div>
  </div>
</div>
